# Spring Boot + MySQL í•œê¸€ ì¸ì½”ë”© ë¬¸ì œ í•´ê²°

## ğŸ“Œ ë¬¸ì œ ì •ì˜

Spring Boot 3.2.2 + MySQL 8.x í™˜ê²½ì—ì„œ í•œê¸€ ë°ì´í„°ë¥¼ ì €ì¥í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ í˜„ìƒ ë°œìƒ:

### ì¦ìƒ
- **PowerShellì—ì„œ ì „ì†¡**: `{"title":"ì²« ê²Œì‹œê¸€","content":"ì•ˆë…•í•˜ì„¸ìš”","author":"í™ê¸¸ë™"}`
- **DBì— ì €ì¥ëœ ê²°ê³¼**: `title: ???`, `content: ?????`, `author: ???`
- **API ì‘ë‹µì—ì„œë„**: `title: Ã¬Â²Â« ÃªÂ²Ã¬ÃªÂ¸` í˜•íƒœë¡œ ê¹¨ì§

## ğŸ” ì›ì¸ ë¶„ì„

### 1. ë°ì´í„°ë² ì´ìŠ¤ ë ˆë²¨
- MySQL ë°ì´í„°ë² ì´ìŠ¤ê°€ **ê¸°ë³¸ charset(latin1)** ìœ¼ë¡œ ìƒì„±ë¨
- `CREATE DATABASE notice_board;` â†’ ê¸°ë³¸ê°’ ì‚¬ìš© ì‹œ latin1
- latin1ì€ í•œê¸€ì„ ì§€ì›í•˜ì§€ ì•Šì•„ `?`ë¡œ ì¹˜í™˜ë¨

### 2. í…Œì´ë¸”/ì»¬ëŸ¼ ë ˆë²¨
- Hibernateì˜ `ddl-auto: create`ë¡œ í…Œì´ë¸” ìë™ ìƒì„± ì‹œ
- **ì»¬ëŸ¼ì— charsetì„ ëª…ì‹œí•˜ì§€ ì•Šìœ¼ë©´** ë°ì´í„°ë² ì´ìŠ¤ ê¸°ë³¸ê°’ ìƒì†
- Entityì˜ `@Column(columnDefinition = "TEXT")`ë§Œìœ¼ë¡œëŠ” charset ì§€ì • ë¶ˆê°€

### 3. HTTP í†µì‹  ë ˆë²¨
- Spring Boot ê¸°ë³¸ HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ UTF-8ì„ ê°•ì œí•˜ì§€ ì•ŠìŒ
- í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë³´ë‚¸ í•œê¸€ì´ ì„œë²„ì—ì„œ ì˜ëª» í•´ì„ë¨

### 4. í´ë¼ì´ì–¸íŠ¸ ë ˆë²¨ (PowerShell)
- PowerShellì˜ ê¸°ë³¸ ì¸ì½”ë”©ì´ ì‹œìŠ¤í…œ ê¸°ë³¸ê°’ ì‚¬ìš©
- JSON ë¬¸ìì—´ì„ ì „ì†¡í•  ë•Œ ì¸ì½”ë”©ì´ ì œëŒ€ë¡œ ì§€ì •ë˜ì§€ ì•ŠìŒ

## âœ… í•´ê²° ë°©ë²•

### 1. ë°ì´í„°ë² ì´ìŠ¤ë¥¼ UTF8MB4ë¡œ ì¬ìƒì„±

```sql
-- MySQL Workbenchì—ì„œ ì‹¤í–‰
DROP DATABASE notice_board;
CREATE DATABASE notice_board CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

**ì™œ utf8mb4ì¸ê°€?**
- MySQLì˜ `utf8`ì€ ìµœëŒ€ 3ë°”ì´íŠ¸ë§Œ ì§€ì› (ì´ëª¨ì§€ ë¶ˆê°€)
- `utf8mb4`ëŠ” ì§„ì§œ UTF-8 í‘œì¤€ (4ë°”ì´íŠ¸, ì´ëª¨ì§€ í¬í•¨ ëª¨ë“  ë¬¸ì ì§€ì›)

### 2. Entity í´ë˜ìŠ¤ì— charset ëª…ì‹œ

```java
@Entity
@Table(name = "posts")
public class Post {
    @Column(nullable = false, length = 200, 
            columnDefinition = "VARCHAR(200) CHARACTER SET utf8mb4")
    private String title;

    @Column(nullable = false, 
            columnDefinition = "TEXT CHARACTER SET utf8mb4")
    private String content;

    @Column(nullable = false, length = 100, 
            columnDefinition = "VARCHAR(100) CHARACTER SET utf8mb4")
    private String author;
}
```

### 3. application.yml ì„¤ì •

```yaml
server:
  port: 8082

spring:
  # HTTP ì¸ì½”ë”© ê°•ì œ
  http:
    encoding:
      charset: UTF-8
      enabled: true
      force: true
      
  datasource:
    url: jdbc:mysql://localhost:3306/notice_board?useSSL=false&serverTimezone=Asia/Seoul&characterEncoding=UTF-8&useUnicode=true
    username: root
    password: woo960525!
    
  jpa:
    hibernate:
      ddl-auto: create
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQLDialect
        globally_quoted_identifiers: false
        connection:
          characterEncoding: utf8mb4
          useUnicode: true
        hbm2ddl:
          charset_name: utf8mb4
    show-sql: true
```

### 4. WebConfig ì¶”ê°€ (HTTP ë©”ì‹œì§€ ì»¨ë²„í„° ì„¤ì •)

```java
package com.example.noticeboard.config;

import org.springframework.context.annotation.Configuration;
import org.springframework.http.converter.HttpMessageConverter;
import org.springframework.http.converter.StringHttpMessageConverter;
import org.springframework.http.converter.json.MappingJackson2HttpMessageConverter;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

import java.nio.charset.StandardCharsets;
import java.util.List;

@Configuration
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
        // String converter with UTF-8
        StringHttpMessageConverter stringConverter = 
            new StringHttpMessageConverter(StandardCharsets.UTF_8);
        stringConverter.setWriteAcceptCharset(false);
        converters.add(stringConverter);

        // JSON converter with UTF-8
        MappingJackson2HttpMessageConverter jsonConverter = 
            new MappingJackson2HttpMessageConverter();
        jsonConverter.setDefaultCharset(StandardCharsets.UTF_8);
        converters.add(jsonConverter);
    }
}
```

### 5. PowerShellì—ì„œ UTF-8ë¡œ ì „ì†¡

```powershell
# ë°©ë²• 1: JSON íŒŒì¼ ì‚¬ìš© (ê¶Œì¥)
$jsonContent = Get-Content -Path "test_post.json" -Encoding UTF8 -Raw
Invoke-RestMethod -Uri http://localhost:8082/api/posts `
    -Method POST `
    -ContentType "application/json; charset=utf-8" `
    -Body ([System.Text.Encoding]::UTF8.GetBytes($jsonContent))

# ë°©ë²• 2: ì§ì ‘ ì „ì†¡
$headers = @{"Content-Type" = "application/json; charset=utf-8"}
$body = @{
    title = "ì²« ê²Œì‹œê¸€"
    content = "ì•ˆë…•í•˜ì„¸ìš”"
    author = "í™ê¸¸ë™"
} | ConvertTo-Json

Invoke-RestMethod -Uri http://localhost:8082/api/posts `
    -Method POST `
    -Headers $headers `
    -Body ([System.Text.Encoding]::UTF8.GetBytes($body))
```

## ğŸ¯ ì ìš© ìˆœì„œ

1. **MySQL Workbenchì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì¬ìƒì„±**
   ```sql
   DROP DATABASE notice_board;
   CREATE DATABASE notice_board CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   ```

2. **ì„œë²„ ì¬ì‹œì‘**
   ```powershell
   # Ctrl + Cë¡œ ì„œë²„ ì¤‘ì§€
   mvn clean spring-boot:run
   ```

3. **í…ŒìŠ¤íŠ¸**
   - ì„œë²„ ì‹œì‘ í™•ì¸ (ì•½ 10ì´ˆ ì†Œìš”)
   - PowerShellì—ì„œ í•œê¸€ ë°ì´í„° ì „ì†¡
   - MySQL Workbenchì—ì„œ ë°ì´í„° í™•ì¸

## ğŸ“Š ê²€ì¦ ë°©ë²•

### DBì—ì„œ í™•ì¸
```sql
USE notice_board;
SELECT * FROM post;
-- title, content, authorê°€ í•œê¸€ë¡œ ì •ìƒ í‘œì‹œë˜ì–´ì•¼ í•¨
```

### APIì—ì„œ í™•ì¸
```powershell
# GET ìš”ì²­
Invoke-RestMethod -Uri http://localhost:8082/api/posts

# ê²°ê³¼ ì˜ˆì‹œ (ì •ìƒ)
# id: 1
# title: ì²« ê²Œì‹œê¸€
# content: ì•ˆë…•í•˜ì„¸ìš”. í•œê¸€ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.
# author: í™ê¸¸ë™
```

## ğŸš¨ ì£¼ì˜ì‚¬í•­

### globally_quoted_identifiers ë¬¸ì œ
- `globally_quoted_identifiers: true` ì„¤ì • ì‹œ
- SQL ìƒì„± ì‹œ `TEXT` ê°™ì€ í‚¤ì›Œë“œë„ ë°±í‹±ìœ¼ë¡œ ê°ì‹¸ì„œ ì—ëŸ¬ ë°œìƒ
- **ì„¤ì •í•˜ì§€ ì•Šê±°ë‚˜ falseë¡œ ì„¤ì •**

### ddl-auto: create ì‚¬ìš© ì‹œ
- **ê°œë°œ í™˜ê²½ì—ì„œë§Œ** ì‚¬ìš©
- ìš´ì˜ í™˜ê²½ì—ì„œëŠ” `validate` ë˜ëŠ” `none` ì‚¬ìš©
- ì„œë²„ ì¬ì‹œì‘ ì‹œ **ëª¨ë“  ë°ì´í„° ì‚­ì œë¨**

## ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸

1. **ë‹¤ì¸µ ì¸ì½”ë”© ì„¤ì • í•„ìš”**: DB â†’ í…Œì´ë¸” â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ â†’ HTTP ëª¨ë“  ë ˆë²¨ì—ì„œ UTF-8 ì„¤ì •
2. **utf8mb4 ì‚¬ìš©**: MySQLì—ì„œëŠ” utf8ì´ ì•„ë‹Œ utf8mb4ë¥¼ ì‚¬ìš©í•´ì•¼ ì§„ì§œ UTF-8
3. **ë°ì´í„°ë² ì´ìŠ¤ ì¬ìƒì„± í•„ìˆ˜**: ê¸°ì¡´ í…Œì´ë¸”ì˜ charsetì€ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ DB ì¬ìƒì„± í•„ìš”
4. **í´ë¼ì´ì–¸íŠ¸ë„ UTF-8**: PowerShell, Postman ë“±ì—ì„œë„ UTF-8 ëª…ì‹œ í•„ìš”

---

**ì‘ì„±ì¼**: 2026ë…„ 2ì›” 9ì¼  
**í™˜ê²½**: Spring Boot 3.2.2, MySQL 8.x, Java 18, Windows 11

ê°„ë‹¨ ìš”ì•½
1ï¸âƒ£ MySQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ UTF8MB4ë¡œ ì„¤ì •
CREATE DATABASE notice_board CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
â†’ ë°ì´í„°ë¥¼ í•œê¸€ë¡œ ì €ì¥í•  ìˆ˜ ìˆê²Œ í•¨

2ï¸âƒ£ PowerShellì—ì„œ UTF-8ë¡œ ì „ì†¡
$jsonContent = Get-Content -Path "test_post.json" -Encoding UTF8 -Raw
Invoke-RestMethod -Uri http://localhost:8082/api/posts `
    -Method POST `
    -ContentType "application/json; charset=utf-8" `
    -Body ([System.Text.Encoding]::UTF8.GetBytes($jsonContent))
â†’ í•œê¸€ ë°ì´í„°ë¥¼ UTF-8ë¡œ ë³´ë‚´ì„œ ì„œë²„ê°€ ì œëŒ€ë¡œ ë°›ì„ ìˆ˜ ìˆê²Œ í•¨

ë‚˜ë¨¸ì§€ëŠ” ë‹¤ ë¶€ê°€ ì„¤ì •ì…ë‹ˆë‹¤:

application.yml ì„¤ì •ë“¤
Entity í´ë˜ìŠ¤ì˜ charset ëª…ì‹œ
WebConfig

ì´ê²ƒë“¤ì€ í™•ì‹¤í•˜ê²Œ í•˜ë ¤ê³  ì¶”ê°€í•œ ê²ƒì´ê³ , í•µì‹¬ì€ DBëŠ” UTF8MB4, PowerShellì€ UTF-8ì…ë‹ˆë‹¤! 